<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link rel="stylesheet" href="./style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Van Der Waal's Equation</title>
  </head>
  <body>
    <h1>What is Van der Waal's Equation?</h1>

    <article>
      <p>In school, we learn that <math-span>PV = nRT</math-span>. It's kind of cool: we get a function for pressure as being proportional to number of moles, <math-span>n</math-span>, multiplied by temperature <math-span>T</math-span>, and divided by volume <math-span>V</math-span>. Explicitly, <math-span>P = c \cdot \tfrac{nT}{V}</math-span>, where <math-span>c</math-span> happens to be the constant <math-span>8.314 \tfrac{\text{J}}{\text{K} \cdot \text{mol}}</math-span> in the real world, which we call <math-span>R</math-span>. This equation is justified by imagining the force exerted by a particle on the walls of an enclosing chamber, as I'll show in this article.</p>
      
      <p>Let's start with an example. Suppose we had a single particle weighing <math-span>1 \text{kg}</math-span> (humor me) in a <math-span>1 \text{m} \times 1 \text{m} \times 1 \text{m}</math-span>  box, moving <math-span>1 \tfrac{\text{m}}{\text{s}}</math-span> straight up, we could easily calculate the force it exerts on the outer wall. Assuming elastic collisions, the particle has a change in impulse with the wall of <math-span>2 \tfrac{\text{m}}{\text{s}} \cdot \text{kg}</math-span> every second.</p>
      
      <p>We'll have to use our imagination here for a second, and make the assumption that it's safe to take the average of this change in impulse over time - instead of thinking of a change in impulse with the wall of <math-span>2 \tfrac{\text{m}}{\text{s}} \cdot \text{kg}</math-span> that happens once a second, we'll think of a continuous force of <math-span>2 \tfrac{\text{kg-m}}{\text{s}^2}</math-span>. Indeed, as the number of particles increases, the force against the walls will will approach this constant hammering of pressure, as opposed to the occasional collision with the wall we're starting with. So, we'll take the assumed to be continuous force generated by our single massive particle and divide by the area of the box, <math-span>6 \text{m}^2</math-span>, to see that we have pressure <math-span> P = \tfrac{2 \text{kg}}{ 6\text{m}\text{s}^2} = \tfrac{1}{3} \text{Pa}</math-span> (note that <math-span>Pa</math-span> is short for Pascals, where <math-span>1 \text{Pa} = 1 \tfrac{\text{N}}{\text{m}}</math-span>). And if we had two particles, we would have two-thirds of a pascal of pressure - it's fairly easy to see that assuming particles have no interaction, the force exerted on the wall is directly proportional to the number of particles! Verify for yourself below:</p>

      <section class="sim-section">
        <div class="sim-with-inputs">
          <canvas class="sim-canvas" id="particle-model-sim" width="1000" height="1000"></canvas>
          <div class="input-box">
            <labeled-input label="Atoms" name="particle-model-atom-count"></labeled-input>
          </div>
        </div>
        <sim-chart name="particle-model-sim-output"></sim-chart>
        <!-- TODO: Pressure-per-area. -->
      </section>

      <!-- Need graphs of pressure on either wall and the total "average force exerted" -->
      <!-- Then when we get to the randomized part, we can say that this assumption is what gives us equal pressure on all of the walls. -->
      <!-- And with that in mind, we can show the inverse correlation with volume. -->
      <p>It does get a little more interesting when we consider particles of different speed. If our particle was going 2 m/s, we would actually have 8 Pa, since each collision would have an impulse of 4 Ns, and they would happen twice as often. In general, we can say that pressure is actually proportional to velocity-squared. In fact, temperature is also defined to be proportional to particle velocity squared, so we have the reasoning for why pressure is proportional to temperature.</p>
      <p>However, it's all going to go haywire in a second, when we try to understand why pressure is inversely proportional to volume. Our particle is traveling straight up. If we decrease the volume towards zero by decreasing our rectangle's width, the ideal gas law would predict that pressure goes to infinity - but it doesn't, at least not in our simulation. So, something must be off. The trick is that particles don't go straight up. They go in completely random directions. So particles can also move left and right. For the rest of the article, I'll consider what happens in 2D, since that is where my sim takes place. The overall idea is that the general principles in 2D translate well to 3D. Note that in 2D land, our pressure is force-per-length, and our volume is replaced with area. Concretely, our pressure is in N/m instead of Pascals. Play around with the effect that random direction has on the sim below:</p>

      <section class="sim-section">
        <div class="sim-with-inputs">
          <canvas class="sim-canvas" id="random-direction-sim" width="1000" height="1000"></canvas>
          <div class="input-box">
            <labeled-input label="Randomize direction" name="random-direction" type="checkbox"></labeled-input>
          </div>
        </div>
        <sim-chart name="random-direction-sim-output"></sim-chart>
        <sim-chart name="random-direction-sim-output"></sim-chart>
      </section>
      <!-- TODO: Make this one resizeable as well. -->
      <!-- TODO: This one should show the vertical, horizontal. -->
      <!-- TODO: This one should show the total. -->
      <!-- TODO: This one should show the pressure multiplied by the volume. -->

      <p>Assuming a particle starts with a speed <math-span>v</math-span> and <math-span>\theta</math-span> as the angle that the particle's path makes with the horizontal, we can still fairly easily compute the expected collisions per second. The horizontal speed of the particle is <math-span>v \cdot \cos{\theta}</math-span>, and with <math-span>w</math-span> and <math-span>h</math-span> for width and height, <math-span>\tfrac{v \cdot \cos{\theta}}{w}</math-span> is the number of collisions-per-second against vertical walls. Likewise, <math-span>\tfrac{v \cdot \sin{\theta}}{h}</math-span> is the number of collisisons-per-second on the horizontal walls. Note that collisions against vertical walls now have <math-span>2v \cdot \cos{\theta} \text{Ns}</math-span>worth of impulse, and likewise collisions on horizontal walls have<math-span>2v \cdot \sin{\theta} \text{Ns}</math-span> worth of impulse. In total, our expected impulse per second (better thought of as time-averaged force on the container) will be</p>
      <math-block>
        \tfrac{v \cdot \cos{\theta}}{w} \text{s}^{-1} \cdot (2v \cdot \cos{\theta}) \text{Ns} + \tfrac{v \cdot \sin{\theta}}{h} \text{s}^{-1} 2v \cdot \sin{\theta} \text{Ns} = 2v^2 \left( \tfrac{\cos^2{\theta}}{w} + \tfrac{\sin^2{\theta}}{h} \right)  \text{N}
      </math-block>
      <p>Yay! We have a huge equation... Dividing the area over which our force is exerted to get our 2D version of pressure, we have <math-span>P = v^2 \left( \tfrac{\cos^2{\theta}}{w(w + h)} + \tfrac{\sin^2{\theta}}{h(w + h)} \right)  \text{N/m}</math-span> Although it's briefly troubling that we don't have a nice <math-span>wh</math-span> in the denominator, we can resolve it by recalling that we don't care about a single particle - we care about what particles will do on expectation. With our expected values for <math-span>\theta</math-span> spread evenly across all angles, we can skip a bit of calculus to conclude that <math-span>\cos^2{\theta}</math-span> is on average <math-span>1/2</math-span>, and likewise for <math-span>\sin^2{\theta}</math-span>. If we go ahead and plug those expected values in, everything cancels nicely to reveal</p>
      <math-block>
        P = \tfrac{v^2}{2wh} \ \text{N/m}.
      </math-block>
      <p>Hurrah, we finally have the inverse-area relationship we've been after. Check out the sim below to see for yourself.</p>

      <section class="sim-section">
        <div class="sim-with-inputs">
          <canvas class="sim-canvas" id="custom-dimension-sim" width="1000" height="1000"></canvas>
          <div class="input-box">
            <labeled-input label="Width" name="width-input"></labeled-input>
            <labeled-input label="Height" name="height-input"></labeled-input>
          </div>
        </div>
        <sim-chart name="custom-dimension-output"></sim-chart>
        <sim-chart name="custom-dimension-output-per-area"></sim-chart>
      </section>

      <p>Now that we've finally shown the inverse-area relationship, we can combine our proportionality rules into a single equation: <math-span>P = c \cdot \tfrac{nT}{A}</math-span>. Seems pretty familiar... Play around with the simulation and see if you can figure out what <math-span>c</math-span> is for this simulation.</p>
      
      <section class="sim-section">
        <div class="sim-with-inputs">
          <canvas class="sim-canvas" id="customizable-sim" width="1000" height="1000"></canvas>
          <div class="input-box">
            <labeled-input label="Atoms" name="atom-count"></labeled-input>
            <labeled-input label="Temperature" name="temperature-input"></labeled-input>
            <labeled-input label="Width" name="custom-sim-width-input"></labeled-input>
            <labeled-input label="Height" name="custom-sim-height-input"></labeled-input>
            <labeled-input label="Coefficient" name="constant-input"></labeled-input>
          </div>
        </div>
        <sim-chart name="customizable-sim-output"></sim-chart>
      </section>

      <!-- Notes -->
      <!-- Assumed box, can be generalized using rotation and calculus. -->
    </article>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
